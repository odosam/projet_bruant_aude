<main>
  <h1>Profil Utilisateur</h1>
  <div class="profile-container">
    <form *ngIf="!isEditing; else editTemplate">
      <label>Username: {{ username }} </label>
      <input type="text" [value]="username" disabled />
      <button class="edit-btn" type="button" (click)="toggleEdit()">Modifier</button>
    </form>

    <div class="profile-item">
      <h2>Vos Cartes Bancaires</h2>

      <div class="profile-item">
        <h3>Cartes Enregistrées</h3>
        <app-display-card></app-display-card>
      </div>

      <div class="profile-item">
        <app-card-form></app-card-form>
      </div>
    </div>

    <ng-template #editTemplate>
      <form (submit)="saveChanges()">
        <div class="profile-item">
          <label>Username:</label>
          <input type="text" [(ngModel)]="username" name="username" required />
        </div>
        <button class="btn-changes" type="submit">Enregistrer</button>
        <button class="btn-changes" type="button" (click)="toggleEdit()">Annuler</button>
      </form>
      
    </ng-template>
    <button (click)="logout()" class="auth-logout">Se déconnecter</button>
  </div>
</main>
